<!DOCTYPE html>
<html>
<head>
<link th:href="@{/teste.css}" rel="stylesheet" media="screen"/>
<link th:href="@{/styleBootstrap/bootstrap/css/bootstrap.min.css}" rel="stylesheet" media="screen"/>
    <script th:src="@{/styleBootstrap/jquery/jquery.min.js}"></script>  
    <script th:src="@{/styleBootstrap/popper/popper.min.js}"></script>  
    <script th:src="@{/styleBootstrap/bootstrap/js/bootstrap.min.js}"></script>
<meta charset="utf-8">
<title>Page Principal</title>
</head>
<body>
<div class="d-grid gap-2 d-md-flex justify-content-md-end mt-1">
	<button class="btn btn-outline-secondary mr-2" onclick="window.location.href='/ajouterTache';">Ajouter Tache</button>
	
	<form method="post" th:action="@{/logout}"><button type="submit" class="btn btn-outline-danger"> DÃ©connexion</button></form>
</div>


<table class="table table-hover">
 	<thead>
	<tr>
			<th>Etat</th>
	        <th>Titre</th>
	        <th>Date</th>
	        <th></th>
	        <th></th>
	</tr>
	</thead>
	
	<tr th:each="tache: ${tache}">
		<br/>
		<td>
		
			<form method="post" th:action="@{/etatTache(id=${tache.id})}">
				<input type="checkbox" th:checked="${tache.etat}" onChange="this.form.submit()"/>
				<p th:if="${tache.etat}" th:text="${#dates.format(tache.date_cloture, 'dd MMM yyyy')}"></p>
			</form>
		</td>
		<td th:text="${tache.titre}"></td>
		<td th:text="${#dates.format(tache.date_derniere_modif, 'dd MMM yyyy')} "></td>	
		<td>
		
		<p>
  <a class="btn btn-primary" data-toggle="collapse" th:href="'#'+${tache.id}" role="button" aria-expanded="false" th:aria-controls="${tache.id}">Description</a>
  </p>
<div class="row">
  <div class="col">
    <div class="collapse multi-collapse" th:id="${tache.id}">
      <div class="card card-body" th:text="${tache.description}">
        
        </div>
    </div>
  </div>
 </div>
		
		
		</td>
		<td>
		<div class="btn-group" role="group" aria-label="Basic mixed styles example">
			<a th:href=@{/modifTache(id=${tache.id})}><button class="btn btn-outline-primary mr-1">Modifier</button></a>
			<form method="post" th:action="@{/suppTache(id=${tache.id})}">
				<button type="submit" class="btn btn-outline-danger">Supprimer</button>
			</form>
		</td>
	</tr>
</table>
</body>
</html>